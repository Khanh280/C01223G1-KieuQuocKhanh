<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"   xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5" >
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style th:replace="~{fragment.html::css}"></style>

    <!--    Bỏ thư viện ni là mất icon ở dưới -->
<!--    <style>-->
<!--        body {-->
<!--            color: #566787;-->
<!--            background: #f5f5f5;-->
<!--            font-family: 'Varela Round', sans-serif;-->
<!--            font-size: 13px;-->
<!--        }-->
<!--        .table-wrapper {-->
<!--            background: #fff;-->
<!--            padding: 20px 25px;-->
<!--            margin: 30px 0;-->
<!--            border-radius: 3px;-->
<!--            box-shadow: 0 1px 1px rgba(0,0,0,.05);-->
<!--        }-->
<!--        .table-title {-->
<!--            padding-bottom: 15px;-->
<!--            background: #fcf2f4;-->
<!--            color: #000;-->
<!--            padding: 16px 30px;-->
<!--            margin: -20px -25px 10px;-->
<!--            border-radius: 3px 3px 0 0;-->
<!--        }-->
<!--        .table-title h2 {-->
<!--            margin: 5px 0 0;-->
<!--            font-size: 24px;-->
<!--        }-->
<!--        .table-title .btn-group {-->
<!--            float: right;-->
<!--        }-->
<!--        .table-title .btn {-->
<!--            color: #fff;-->
<!--            float: right;-->
<!--            font-size: 13px;-->
<!--            border: none;-->
<!--            min-width: 50px;-->
<!--            border-radius: 2px;-->
<!--            border: none;-->
<!--            outline: none !important;-->
<!--            margin-left: 10px;-->
<!--        }-->
<!--        .table-title .btn i {-->
<!--            float: left;-->
<!--            font-size: 21px;-->
<!--            margin-right: 5px;-->
<!--        }-->
<!--        .table-title .btn span {-->
<!--            float: left;-->
<!--            margin-top: 2px;-->
<!--        }-->
<!--        table.table tr th, table.table tr td {-->
<!--            border-color: #e9e9e9;-->
<!--            padding: 12px 15px;-->
<!--            vertical-align: middle;-->
<!--        }-->
<!--        table.table tr th:first-child {-->
<!--            width: 60px;-->
<!--        }-->
<!--        table.table tr th:last-child {-->
<!--            width: 100px;-->
<!--        }-->
<!--        table.table-striped tbody tr:nth-of-type(odd) {-->
<!--            background-color: #fcfcfc;-->
<!--        }-->
<!--        table.table-striped.table-hover tbody tr:hover {-->
<!--            background: #f5f5f5;-->
<!--        }-->
<!--        table.table th i {-->
<!--            font-size: 13px;-->
<!--            margin: 0 5px;-->
<!--            cursor: pointer;-->
<!--        }-->
<!--        table.table td:last-child i {-->
<!--            opacity: 0.9;-->
<!--            font-size: 22px;-->
<!--            margin: 0 5px;-->
<!--        }-->
<!--        table.table td a {-->
<!--            font-weight: bold;-->
<!--            color: #566787;-->
<!--            display: inline-block;-->
<!--            text-decoration: none;-->
<!--            outline: none !important;-->
<!--        }-->
<!--        table.table td a:hover {-->
<!--            color: #2196F3;-->
<!--        }-->
<!--        table.table td a.edit {-->
<!--            color: #FFC107;-->
<!--        }-->
<!--        table.table td a.delete {-->
<!--            color: #F44336;-->
<!--        }-->
<!--        table.table td i {-->
<!--            font-size: 19px;-->
<!--        }-->
<!--        table.table .avatar {-->
<!--            border-radius: 50%;-->
<!--            vertical-align: middle;-->
<!--            margin-right: 10px;-->
<!--        }-->
<!--        .pagination {-->
<!--            float: right;-->
<!--            margin: 0 0 5px;-->
<!--        }-->
<!--        .pagination li a {-->
<!--            border: none;-->
<!--            font-size: 13px;-->
<!--            min-width: 30px;-->
<!--            min-height: 30px;-->
<!--            color: #999;-->
<!--            margin: 0 2px;-->
<!--            line-height: 30px;-->
<!--            border-radius: 2px !important;-->
<!--            text-align: center;-->
<!--            padding: 0 6px;-->
<!--        }-->
<!--        .pagination li a:hover {-->
<!--            color: #666;-->
<!--        }-->
<!--        .pagination li.active a, .pagination li.active a.page-link {-->
<!--            background: #03A9F4;-->
<!--        }-->
<!--        .pagination li.active a:hover {-->
<!--            background: #0397d6;-->
<!--        }-->
<!--        .pagination li.disabled i {-->
<!--            color: #ccc;-->
<!--        }-->
<!--        .pagination li i {-->
<!--            font-size: 16px;-->
<!--            padding-top: 6px-->
<!--        }-->
<!--        .hint-text {-->
<!--            float: left;-->
<!--            margin-top: 10px;-->
<!--            font-size: 13px;-->
<!--        }-->
<!--        /* Custom checkbox */-->
<!--        .custom-checkbox {-->
<!--            position: relative;-->
<!--        }-->
<!--        .custom-checkbox input[type="checkbox"] {-->
<!--            opacity: 0;-->
<!--            position: absolute;-->
<!--            margin: 5px 0 0 3px;-->
<!--            z-index: 9;-->
<!--        }-->
<!--        .custom-checkbox label:before{-->
<!--            width: 18px;-->
<!--            height: 18px;-->
<!--        }-->
<!--        .custom-checkbox label:before {-->
<!--            content: '';-->
<!--            margin-right: 10px;-->
<!--            display: inline-block;-->
<!--            vertical-align: text-top;-->
<!--            background: white;-->
<!--            border: 1px solid #bbb;-->
<!--            border-radius: 2px;-->
<!--            box-sizing: border-box;-->
<!--            z-index: 2;-->
<!--        }-->
<!--        .custom-checkbox input[type="checkbox"]:checked + label:after {-->
<!--            content: '';-->
<!--            position: absolute;-->
<!--            left: 6px;-->
<!--            top: 3px;-->
<!--            width: 6px;-->
<!--            height: 11px;-->
<!--            border: solid #000;-->
<!--            border-width: 0 3px 3px 0;-->
<!--            transform: inherit;-->
<!--            z-index: 3;-->
<!--            transform: rotateZ(45deg);-->
<!--        }-->
<!--        .custom-checkbox input[type="checkbox"]:checked + label:before {-->
<!--            border-color: #03A9F4;-->
<!--            background: #03A9F4;-->
<!--        }-->
<!--        .custom-checkbox input[type="checkbox"]:checked + label:after {-->
<!--            border-color: #fff;-->
<!--        }-->
<!--        .custom-checkbox input[type="checkbox"]:disabled + label:before {-->
<!--            color: #b8b8b8;-->
<!--            cursor: auto;-->
<!--            box-shadow: none;-->
<!--            background: #ddd;-->
<!--        }-->
<!--        /* Modal styles */-->
<!--        .modal .modal-dialog {-->
<!--            max-width: 400px;-->
<!--        }-->
<!--        .modal .modal-header, .modal .modal-body, .modal .modal-footer {-->
<!--            padding: 20px 30px;-->
<!--        }-->
<!--        .modal .modal-content {-->
<!--            border-radius: 3px;-->
<!--        }-->
<!--        .modal .modal-footer {-->
<!--            background: #ecf0f1;-->
<!--            border-radius: 0 0 3px 3px;-->
<!--        }-->
<!--        .modal .modal-title {-->
<!--            display: inline-block;-->
<!--        }-->
<!--        .modal .form-control {-->
<!--            border-radius: 2px;-->
<!--            box-shadow: none;-->
<!--            border-color: #dddddd;-->
<!--        }-->
<!--        .modal textarea.form-control {-->
<!--            resize: vertical;-->
<!--        }-->
<!--        .modal .btn {-->
<!--            border-radius: 2px;-->
<!--            min-width: 100px;-->
<!--        }-->
<!--        .modal form label {-->
<!--            font-weight: normal;-->
<!--        }-->
<!--    </style>-->
    <link rel="stylesheet" href="/static/pet-service-css.css">
    <link rel="stylesheet" href="/static/crud_table.css">
<body>
<div th:replace="fragment.html::header"></div>

<div class="container">
    <div class="table-wrapper" style="height: 83vh">
        <div class="table-title">
            <div class="row">
                <div class="col-sm-6">
                    <h2>Select <b>Customer</b></h2>
                </div>


                <div class="col-sm-6">


<!--                    <a  th:href="@{/api/admin/booking-service/create-customer}" class="btn btn-success" data-toggle="modal"><i-->
<!--                            class="material-icons">&#xE147;</i>-->
<!--                        <span>Add New Customer</span></a>-->
<!--                    <a th:href="@{/api/admin/booking-service/create-cucstomer}" class="btn btn-success" data-toggle="modal"><i-->
<!--                            class="material-icons">&#xE147;</i>-->
<!--                        <span>Manage Account</span></a>-->
                    <!--                    <a href="#deleteEmployeeModal" class="btn btn-danger" data-toggle="modal"><i class="material-icons">&#xE15C;</i>-->
                    <!--                        <span>Delete</span></a>-->
                    <!--                    <a th:href="@{/account}" class="btn btn-success" data-toggle="modal"><i-->
                    <!--                            class="material-icons">&#xE147;</i>-->
                    <!--                        <span>Manage Account</span></a>-->
                </div>


            </div>
        </div>
        <div class="row mt-1 container-fluid">
            <div class="dropdown col-2">
            </div>
            <form th:action="@{/api/admin/booking-service/search-customer}" method="post"  class="col-10"
                  style="margin: 8px 33%">
                <div class="row">
                    <div class="col-3">
                        <input class="form-control form-control-sm" type="text" placeholder="name"   th:value=" ${name}"
                               aria-label=".form-control-sm example" name="name">
                    </div>
                    <div class="col-3">
                        <input class="form-control form-control-sm" type="text" placeholder="phone"
                               aria-label=".form-control-sm example" name="phone" th:value=" ${phone}">
                    </div>
<!--                    <div hidden class="col-3">-->
<!--                        <input class="form-control form-control-sm" type="text" placeholder="username"-->
<!--                               aria-label=".form-control-sm example" name="username">-->
<!--                    </div>-->

                    <div class="col-1">
                        <button class="btn btn-sm btn-primary" >Search
                        </button>
                    </div>
                </div>
            </form>
        </div>
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th><span class="custom-checkbox"><input type="checkbox" id="selectAll"><label for="selectAll"></label></span>
                </th>
                <th>STT</th>
                <th>Name</th>
                <th>Phone</th>
                <th>Email</th>
                <th>Address</th>

                <th>Action</th>
            </tr>
            </thead>
            <tbody>



            <tr th:each="customers,loop  :  ${customerList}">
                <td>
							<span class="custom-checkbox">
								<input type="checkbox" id="checkbox1" name="options[]" value="1">
								<label for="checkbox1"></label>
							</span>
                </td>

                <td th:text="${loop.count}"></td>

                <td><a th:text="${customers.getName()}"
                       th:href="@{/customer/{customerId}/view(customerId=${customers.customerId})}"></a></td>
                <td th:text="${customers.getPhone()}"></td>
                <td th:text="${customers.getEmail()}"></td>
                <td th:text="${customers.getAddress()}"></td>
<!--                <td th:text="${customers.getAccount().getUsername()}"></td>-->
<!--                <td th:text="${customers.getAccount().getRole().getNameRole()}"></td>-->

                <td>
                    <a href="#deleteEmployeeModal" th:attr="onclick=|deleteInformation(${customers.customerId})|" class="btn btn-success" data-toggle="modal">
                        <span style="color: #e0e0e0">Select</span></a>
<!--                    <a sec:authorize="hasAuthority('ROLE_ADMIN')" th:href="@{/customer/edit/{customerId}(customerId=${customers.customerId})}" class="edit"-->
<!--                       data-toggle="modal"><i class="material-icons"-->
<!--                                              data-toggle="tooltip" title="Edit">&#xE254;</i></a>-->

<!--                    <a  sec:authorize="hasAuthority('ROLE_ADMIN')" th:attr="onclick=|infoDelete(${customers.getCustomerId()},'${customers.getName()}')|"-->
<!--                        href="#deleteEmployeeModal" class="delete" data-toggle="modal">-->
<!--                        <i class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i></a>-->

                </td>


            </tr>


            </tbody>
        </table>
        <div th:if="${notFound}">
            <h3 style="text-align: center;margin-bottom: 25vw; color: red">No Data found.</h3>
        </div>
        <div id="deleteEmployeeModal" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form th:action="@{/api/admin/booking-service/chooseService}" method="get" th:object="${bookingService}">
                        <div class="modal-header">
                            <h4 class="modal-title">Booking Time</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Date</label>
                                <input required th:field="*{bookingDate}" type="date" class="form-control Future" id="bookingDate">
                                <!--                    <p style="color:red;" th:if="${#fields.hasErrors('bookingDate')}" th:errors="*{bookingDate}"></p>-->
                            </div>
                            <script>$(document).ready(function(){
                                var todaysDate = new Date();	// Get today's date.

                                // Get today's date.
                                var year = todaysDate.getFullYear();			// yyyy
                                var month = ("0" + (todaysDate.getMonth() + 1)).slice(-2); // mm
                                var day = ("0" + todaysDate.getDate()).slice(-2);	// dd

                                var dtToday = (year + "-" + month + "-" + (+ day+1));	// Results in yyyy-mm-dd

                                // Now set the max date value for the calendar to be that date.
                                $("#bookingDate").attr('max', ((1+year) + "-" + month + "-" + day));
                                $("#bookingDate").attr('min', dtToday);
                            });
                            </script>
                            <div class="form-group">
                                <input hidden type="number" id="id" name="customerId" >

                                <div>
                                    <label for="appt-time">
                                        Choose an appointment time (opening hours 09:00 to 18:00):
                                    </label>
                                    <input class="times"  th:field="*{bookingTime}"
                                           id="appt-time"
                                           type="time"
                                           name="appt-time"
                                           min="09:00"
                                           max="18:00"
                                           required />
                                    <span class="validity"></span>
                                </div>
                                <!--                        <div>-->
                                <!--&lt;!&ndash;                            <input type="submit" value="Submit form" />&ndash;&gt;-->
                                <!--                        </div>-->

                                <!--      <p style="color:red;" th:if="${#fields.hasErrors('price')}" th:errors="*{price}"></p>-->
                            </div>
                            <!--    <div class="form-group">-->
                            <!--      <label>Description</label>-->
                            <!--      <textarea th:field="*{description}" class="form-control" ></textarea>-->
                            <!--      <p style="color:red;" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></p>-->
                            <!--    </div>-->
                            <!--    <div class="form-group">-->
                            <!--      <label for="thumbnailURL">ThumbnailURL:</label>-->
                            <!--      <input type="hidden" id="thumbnailURL" th:field="*{image}" />-->
                            <!--      <input id="btnThumbnailURL" type="file" class="form-control"/>-->
                            <!--      <progress id="uploader" value="0" max="100">0%</progress>-->
                            <!--    </div>-->
                        </div>
                        <div class="modal-footer">
                            <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                            <input type="submit" class="btn btn-success" value="Add">
                        </div>
                        <script>$(document).ready(function(){
                            var todaysDate = new Date();	// Get today's date.

                            // Get today's date.
                            var year = todaysDate.getFullYear();			// yyyy
                            var month = ("0" + (todaysDate.getMonth() + 1)).slice(-2); // mm
                            var day = ("0" + todaysDate.getDate()).slice(-2);	// dd

                            var dtToday = (year + "-" + month + "-" + day);	// Results in yyyy-mm-dd

                            // Now set the max date value for the calendar to be that date.
                            $(".Past input").attr('max', dtToday);
                            $(".Future input").attr('min', dtToday);
                        });</script>
                    </form>
                </div>
            </div>
        </div>
        <script>
            function deleteInformation(id) {
                document.getElementById("id").value = id;
                // document.getElementById("name").innerText = name;
            }
        </script>
<!--        <div style="justify-content: space-between">-->
<!--            <div class="btn-group me-2" role="group" aria-label="First group">-->
<!--                <a th:href="@{/api/admin/booking-service/search/(page=${customerList.number - 1})}" th:if="${customerList.hasPrevious()}"-->
<!--                   class="btn btn-primary"-->
<!--                   style="line-height: 100%">Previous</a>-->
<!--                <th:block class="btn btn-primary"-->
<!--                          th:each="pageNo : ${#numbers.sequence(0,customerList.getTotalPages()-1)}">-->
<!--                    <a class="btn btn-primary" th:text="${pageNo + 1}" th:href="@{/api/admin/booking-service/search/(page = ${pageNo})}"-->
<!--                       style="color: white; background-color: #0d6efd;width: 40px;text-align: center;line-height: 100%"></a>-->
<!--                </th:block>-->
<!--                <a th:href="@{/api/admin/booking-service/search/(page=${customerList.number + 1})}" th:if="${customerList.hasNext()}"-->
<!--                   class="btn btn-primary"-->
<!--                   style="line-height: 100%">Next</a>-->
<!--            </div>-->

<!--        </div>-->

        <div class="row" th:if="${search} == false">
            <div class="col-10" >
                <a class="btn btn-sm btn-outline-primary"  style="border: 1px solid #007bff"  th:href="@{/api/admin/booking-service/create/(page = ${customerList.number - 1})}" th:if="${customerList.hasPrevious()}">Previous</a>
                <th:block th:each=" pageNo : ${#numbers.sequence(0,customerList.getTotalPages() -1)}">
                    <a class="btn btn-sm btn-outline-primary" style="border: 1px solid #007bff"   th:href="@{/api/admin/booking-service/create/(page = ${pageNo})}" th:text="${pageNo +1}" th:classappend="${pageNo == customerList.number ? 'active' : ''}"></a>
                </th:block>
                <a class="btn btn-sm btn-outline-primary" style="border: 1px solid #007bff"  th:href="@{/api/admin/booking-service/create/(page = ${customerList.number + 1})}" th:if="${customerList.hasNext()}">Next</a>
            </div>

            <div class="col-10" th:if="${search} == true">
                <a class="btn btn-sm btn-outline-primary" style="border: 1px solid #007bff"  th:href="@{/api/admin/booking-service/search-customer/(name=${name},phone=${phone},page = ${customerList.number - 1})}" th:if="${customerList.hasPrevious()}">Previous</a>
                <th:block th:each=" pageNo : ${#numbers.sequence(0,customerList.getTotalPages() -1)}">
                    <a class="btn btn-sm btn-outline-primary" style="border: 1px solid #007bff"  th:href="@{/api/admin/booking-service/search-customer/(name=${name},phone=${phone},page = ${pageNo})}" th:text="${pageNo +1}" th:classappend="${pageNo == customerList.number ? 'active' : ''}"></a>
                </th:block>
                <a class="btn btn-sm btn-outline-primary" style="border: 1px solid #007bff"  th:href="@{/api/admin/booking-service/search-customer/(name=${name},phone=${phone}, page = ${customerList.number + 1})}" th:if="${customerList.hasNext()}">Next</a>
            </div>
            <!--            <div class="col-2">-->
            <!--                <p style="font-weight: bold" th:if="${totalPriceOrderDetail != null}" th:text="${ 'Total : ' + totalPriceOrderDetail + ' $ '}"></p>-->
            <!--                <p style="font-weight: bold" th:if="${totalPriceOrderDetail == null}" th:text="${ 'Total : 0 $ '}"></p>-->
            <!--            </div>-->
        </div>
    </div>

</div>

<!-- Delete Modal HTML -->


<!--<div th:if="${mess}">-->
<!--    <span th:text="${mess}" id="inputId" hidden></span>-->
<!--</div>-->
<div th:replace="fragment.html::footer"></div>

<script>
    function infoDelete(customerId, name) {
        document.getElementById("customerId").value = customerId;
        document.getElementById("name").innerText = name;
    }
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script th:if="${mess} != null">
    let inputId = document.getElementById("inputId");

        swal({
            title: "SUCCESSFULLY",
            text: inputId.innerText,
            icon: "success",
            button: "OK",
        }).then((idOk) => {
            if (idOk) {
                inputId.innerText = '';
            }
        });

</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script>
    $(document).ready(function () {
        // Activate tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // Select/Deselect checkboxes
        var checkbox = $('table tbody input[type="checkbox"]');
        $("#selectAll").click(function () {
            if (this.checked) {
                checkbox.each(function () {
                    this.checked = true;
                });
            } else {
                checkbox.each(function () {
                    this.checked = false;
                });
            }
        });
        checkbox.click(function () {
            if (!this.checked) {
                $("#selectAll").prop("checked", false);
            }
        });
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<div hidden th:if="${mess}">
    <span th:text="${mess}" id="inputId" ></span>
</div>
</body>
</html>
<!--<script th:if="${mess != null}">-->
<!--    let inputId = document.getElementById("inputId");-->
<!--    // if (inputId && inputId.innerText != null) {-->
<!--        swal({-->
<!--            // title: "SUCCESSFULLY",-->
<!--            text: inputId.innerText,-->
<!--            // icon: "success",-->
<!--            button: "OK",-->
<!--        }).then((idOk) => {-->
<!--            if (idOk) {-->
<!--                inputId.innerText = '';-->
<!--            }-->
<!--        });-->

<!--</script>-->